<?php
class MWDControllerForms {
	////////////////////////////////////////////////////////////////////////////////////////
	// Events                                                                             //
	////////////////////////////////////////////////////////////////////////////////////////
	////////////////////////////////////////////////////////////////////////////////////////
	// Constants                                                                          //
	////////////////////////////////////////////////////////////////////////////////////////
	////////////////////////////////////////////////////////////////////////////////////////
	// Variables                                                                          //
	////////////////////////////////////////////////////////////////////////////////////////
	////////////////////////////////////////////////////////////////////////////////////////
	// Constructor & Destructor                                                           //
	////////////////////////////////////////////////////////////////////////////////////////
	public function __construct() {
		
	}
	////////////////////////////////////////////////////////////////////////////////////////
	// Public Methods                                                                     //
	////////////////////////////////////////////////////////////////////////////////////////
	public function execute($id = 0, $type = '') {
		if( ! class_exists( 'Mailchimp' ) ) {
			include_once( MWD_DIR . '/includes/Mailchimp.php' );
		}

		return $this->display($id, $type);
	}

	public function display($id, $type) {
		if (session_id() == '' || (function_exists('session_status') && (session_status() == PHP_SESSION_NONE))) {
			@session_start();
		}
		$form_preview = isset($_GET['form_preview']) ? $_GET['form_preview'] : '';
		$type = $form_preview == 1 ? 'embedded' : $type;

		require_once MWD_DIR . "/frontend/models/MWDModelForms.php";
		$model = new MWDModelForms();

		require_once MWD_DIR . "/frontend/views/MWDViewForms.php";
		$view = new MWDViewForms($model);

		if($type == 'embedded'){
			return $view->display((int)$id, '', $type);
		}
		else{
			return $view->autoload_form();
		}		
	}
	
	////////////////////////////////////////////////////////////////////////////////////////
	// Getters & Setters                                                                  //
	////////////////////////////////////////////////////////////////////////////////////////
	////////////////////////////////////////////////////////////////////////////////////////
	// Private Methods                                                                    //
	////////////////////////////////////////////////////////////////////////////////////////
	////////////////////////////////////////////////////////////////////////////////////////
	// Listeners                                                                          //
	////////////////////////////////////////////////////////////////////////////////////////
}